(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43958743"],{1835:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"currency-ops-new"},[n("div",{staticStyle:{padding:"10px"}},[n("p",{on:{click:e.checkMigrateContractSaiBalance}},[n("b",[e._v("\n          "+e._s(e.$t("dappsMaker.current-sai-balance",{value:e.migrateContractBalance})))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.noSaiAvailable&&!e.needsAtLeast20,expression:"noSaiAvailable && !needsAtLeast20"}]},[e._v("\n        "+e._s(e.$t("dappsMaker.not-enough-sai"))+"\n      ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.needsAtLeast20,expression:"needsAtLeast20"}],staticStyle:{padding:"10px"}},[e._v("\n        "+e._s(e.$t("dappsMaker.needs-at-least-20",{value:e.migrateContractBalance}))+"\n      ")])]),n("div",{staticClass:"currency-picker-container"},[n("div",{staticClass:"interface__block-title"},[e._v("\n        "+e._s(e.$t("dappsMaker.migrate-single-collateral-to-multi-collateral"))+"\n      ")]),n("h4",{directives:[{name:"show",rawName:"v-show",value:!e.cdpDetailsLoaded,expression:"!cdpDetailsLoaded"}]},[e._v("\n        "+e._s(e.$t("dappsMaker.loading-your-cdps"))+"\n      ")]),e._l(e.cdps,(function(t){return n("div",{key:t},[n("div",{class:["dropdown-text-container","dropdown-container","no-point",t===e.selectedCdp?"selectedCDP":""],on:{click:function(n){return e.selectCDP(t)}}},[n("p",[n("span",{staticClass:"cc DAI cc-icon cc-icon-dai currency-symbol"}),e._v("\n            "+e._s(t)+"\n            "),n("span",{staticClass:"subname"},[e._v("- CDP ")])])])])})),n("div",{directives:[{name:"show",rawName:"v-show",value:e.noCdpsToMigrateFound,expression:"noCdpsToMigrateFound"}]},[e._v("\n        "+e._s(e.$t("dappsMaker.no-cdps-to-migrate-found"))+"\n      ")]),n("div",{staticClass:"buttons-container"},[n("div",{class:[e.validInputs?"":"disabled","submit-button large-round-button-green-filled"],on:{click:e.beginMigration}},[e._v("\n          "+e._s(e.$t("dappsMaker.migrate"))+"\n        ")])])],2),n("div")])])},r=[],i=(n("8e6e"),n("456d"),n("ac6a"),n("5df3"),n("6b54"),n("96cf"),n("3b8d")),s=n("bd86"),c=n("2f62"),o=n("55c1"),u=n("539d"),d=n("c8e5"),p=n("901e"),l=n.n(p),h=n("a20a"),v=n("d1fb"),f=n("70c1"),g=n.n(f),b=n("ce96");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e){return new l.a(e)},y={components:{"interface-container-title":o["a"],"interface-bottom-text":u["a"],blockie:d["a"],"select-cdp-entry":h["a"]},props:{ethPrice:{type:l.a,default:function(){return new l.a(0)}},makerActive:{type:Boolean,default:!1},availableCdps:{type:Object,default:function(){return{}}},getCdp:{type:Function,default:function(){}},getValueOrFunction:{type:Function,default:function(){}}},data:function(){return{cdps:[],daiGenerated:0,migrateContractBalance:0,selectedCdp:0,proxyAddress:"",cdpBalances:{},migrationNotPossible:!1,cdpDetailsLoaded:!1,noSaiAvailable:!1,needsAtLeast20:!1}},computed:w({},Object(c["b"])(["account","gasPrice","web3","network","ens"]),{migrationPossible:function(){return C(this.daiGenerated).lt(C(this.migrateContractBalance))&&this.cdpDetailsLoaded&&C(this.daiGenerated).gte(20)},validInputs:function(){return 0!==this.selectedCdp&&this.migrationPossible},noCdpsToMigrateFound:function(){return 0===this.cdps.length&&this.cdpDetailsLoaded}}),watch:{$route:"setup",makerActive:"setup"},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.setup();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{setup:function(){var e=this;this.makerActive&&(this.migrateContractBalance=0,this.maker=this.getValueOrFunction("maker"),this._mcdManager=this.getValueOrFunction("_mcdManager"),this.getProxy=this.getValueOrFunction("getProxy"),this.proxyAllowances=this.getValueOrFunction("proxyAllowances"),this.proxyAddress=this.getValueOrFunction("proxyAddress"),this.findCdps(),this.getMigrationContractBalance().then((function(t){return e.migrateContractBalance=t})),this.checkMigrateContractSaiBalance())},findCdps:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["y"])(this,this.getValueOrFunction("_cdpService"));case 2:t=e.sent,n=t.withProxy,a=t.withoutProxy,this.cdpDetailsLoaded=!0,this.cdps=n.concat(a);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),beginMigration:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0===this.selectedCdp){e.next=35;break}return this.proxyAddress=this.getValueOrFunction("proxyAddress"),e.next=4,this.getValueOrFunction("_cdpService").getCdp(this.selectedCdp,this.proxyAddress);case 4:return t=e.sent,e.next=7,t.getGovernanceFee();case 7:return n=e.sent.toBigNumber(),e.next=10,t.getDebtValue();case 10:return a=e.sent.toBigNumber(),this.cdpBalances[this.selectedCdp]={balance:a},e.next=14,this.checkMigrateContractSaiBalance(a);case 14:if(r=e.sent,a.lt(20)&&(this.needsAtLeast20=!0),!r){e.next=35;break}return e.next=19,this.needsApproval(n);case 19:if(i=e.sent,!i){e.next=27;break}return e.next=23,this.approveMkr(n);case 23:s=e.sent,this.web3.eth.sendTransaction(s).catch((function(e){b["e"].responseHandler(e,b["e"].ERROR)})),e.next=35;break;case 27:return e.prev=27,e.next=30,this.migrate(this.selectedCdp);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](27),b["e"].responseHandler(e.t0,b["e"].ERROR);case 35:case"end":return e.stop()}}),e,this,[[27,32]])})));function t(){return e.apply(this,arguments)}return t}(),migrate:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.maker.service("migration").getMigration("single-to-multi-cdp"),e.next=3,n.execute(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),needsApproval:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new this.web3.eth.Contract(v["c"],v["h"].MCD_GOV),e.next=3,n.methods.allowance(this.account.address,this.proxyAddress).call();case 3:return a=e.sent,e.abrupt("return",a<t);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),approveMkr:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new this.web3.eth.Contract(v["c"],v["h"].MCD_GOV),e.t0=t.methods,e.t1=this.proxyAddress,e.t2=g.a,e.next=6,t.methods.balanceOf(this.account.address).call();case 6:return e.t3=e.sent,e.t4=e.t2.toWei.call(e.t2,e.t3,"ether").toString(),n=e.t0.approve.call(e.t0,e.t1,e.t4).encodeABI(),e.abrupt("return",{from:this.account.address,to:v["h"].MCD_GOV,value:0,data:n});case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectCDP:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedCdp=t,!this.cdpBalances[this.selectedCdp]){e.next=7;break}this.checkMigrateContractSaiBalance(this.cdpBalances[this.selectedCdp].balance),C(this.cdpBalances[this.selectedCdp].balance).lt(20)?this.needsAtLeast20=!0:this.needsAtLeast20=!1,this.daiGenerated=this.cdpBalances[this.selectedCdp],e.next=20;break;case 7:return e.next=9,this.getValueOrFunction("_cdpService").getCdp(t,this.proxyAddress);case 9:return n=e.sent,e.next=12,n.getGovernanceFee();case 12:return a=e.sent.toBigNumber(),e.next=15,n.getDebtValue();case 15:r=e.sent.toBigNumber(),this.checkMigrateContractSaiBalance(r),r.lt(20)?this.needsAtLeast20=!0:this.needsAtLeast20=!1,this.daiGenerated=r.toString(),this.cdpBalances[this.selectedCdp]={balance:r,fee:a};case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkMigrateContractSaiBalance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,e.next=3,this.getMigrationContractBalance();case 3:if(this.migrateContractBalance=e.sent,!C(this.migrateContractBalance).lt(20)){e.next=7;break}return this.noSaiAvailable=!0,e.abrupt("return",!1);case 7:if(!C(t).lt(C(this.migrateContractBalance))){e.next=9;break}return e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getMigrationContractBalance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new this.web3.eth.Contract(v["c"],v["h"].SAI).methods.balanceOf(v["h"].MCD_JOIN_SAI).call();case 2:return t=e.sent,e.abrupt("return",g.a.fromWei(t,"ether").toString());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submitTransaction:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.prev=1,t=g.a.toWei(this.daiGenerated,"ether").toString(),e.next=5,Promise.all([this.approve(t),this.migrate(t)]);case 5:n=e.sent,this.web3.mew.sendBatchTransactions(n).catch((function(e){b["e"].responseHandler(e,b["e"].ERROR)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),b["e"].responseHandler(e.t0,b["e"].ERROR);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),displayPercentValue:function(e){return l.a.isBigNumber(e)||(e=new l.a(e)),e.times(100).toString()},displayFixedValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return l.a.isBigNumber(e)||(e=new l.a(e)),e.toFixed(t).toString()}}},x=y,k=(n("38460"),n("2877")),_=Object(k["a"])(x,a,r,!1,null,"c9db9caa",null),O=_.exports;t["default"]=O},38460:function(e,t,n){"use strict";var a=n("5405"),r=n.n(a);r.a},5405:function(e,t,n){},a20a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container-maker"},[n("div",{staticClass:"manage-container"},[n("div",{staticClass:"manage-container-blocks"},[n("div",{staticClass:"information-single-block"},[n("div",{staticClass:"block-item"},[n("div",{staticClass:"block-title"},[n("div",{staticClass:"select-label"},[n("p",[e._v(e._s(e.$t("dappsMaker.position-label",{value:e.cdpId})))]),n("p",[n("span",{staticClass:"standard-button__green-border"},[e.hasProxy?n("button",{staticClass:"the-button-box",on:{click:function(t){return e.openManage(e.cdpId)}}},[e._v("\n                      "+e._s(e.$t("dappsMaker.manage"))+"\n                    ")]):e._e(),e.hasProxy?e._e():n("button",{staticClass:"the-button-box",on:{click:function(t){return e.openMigrate(e.cdpId)}}},[e._v("\n                      "+e._s(e.$t("dappsMaker.view"))+"\n                    ")])])])])]),n("div",{staticClass:"block-content-container"},[n("div",{staticClass:"block-content"},[n("div",{staticClass:"item"},[n("div",[n("p",[e._v(e._s(e.$t("dappsMaker.deposited")))])]),n("div",[e._v("\n                    "+e._s(e.displayFixedValue(e.aCdp.ethCollateral,5,!1))+"\n                    "),n("span",[e._v(e._s(e.$t("common.currency.eth")))])]),n("div",[e._v("\n                    "+e._s(e.displayFixedValue(e.aCdp.pethCollateral,5,!0))+"\n                    "),n("span",[e._v(e._s(e.$t("common.currency.peth")))]),e._v("\n                    "+e._s(e.displayFixedValue(e.aCdp.usdCollateral,2))+"\n                    "),n("span",[e._v(e._s(e.$t("common.currency.usd")))])]),n("div",[n("br"),n("div",[e._v("\n                      "+e._s(e.$t("dappsMaker.liquid-price"))+" ("+e._s(e.$t("common.currency.eth"))+"/"+e._s(e.$t("common.currency.usd"))+")\n                    ")]),n("span",{class:e.safeRank(e.aCdp.collatRatio)},[e._v(e._s(e.aCdp?e.displayFixedValue(e.aCdp.liquidationPrice,2):0))]),n("span",{staticClass:"liq-usd"},[e._v("\n                      "+e._s(e.$t("common.currency.usd")))])])])]),n("div",{staticClass:"block-content"},[n("div",{staticClass:"item"},[n("div",[n("p",[e._v(e._s(e.$t("dappsMaker.generated")))])]),n("div",[e._v("\n                    "+e._s(e.aCdp.debtValue)+"\n                    "),n("span",[e._v(e._s(e.$t("dappsMaker.dai")))])]),n("div",[e._v("\n                    "+e._s(e.displayFixedValue(e.aCdp.debtValue,2))+"\n                    "),n("span",[e._v(e._s(e.$t("common.currency.usd")))])]),n("div",[n("br"),n("div",[e._v(e._s(e.$t("dappsMaker.collateral-ratio")))]),n("span",{class:e.safeRank(e.aCdp.collatRatio)},[e._v("\n                      "+e._s(e.aCdp?e.displayFixedValue(e.displayPercentValue(e.aCdp.collatRatio)):0)+"%\n                    ")])])])])])])])])])])])},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("6b54"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),s=n("bd86"),c=n("2f62"),o=n("55c1"),u=n("539d"),d=n("c8e5"),p=n("901e"),l=n.n(p);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return new l.a(e)},g={components:{"interface-container-title":o["a"],"interface-bottom-text":u["a"],blockie:d["a"]},props:{cdpId:{type:String,default:"0"},aCdp:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:v({},Object(c["b"])(["account","gasPrice","web3","network","ens"]),{hasProxy:function(){return!this.aCdp||!this.aCdp.noProxy}}),mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),methods:{openManage:function(){this.$route.path.includes("maker-dai")&&this.$router.push({name:"manage",params:{cdpId:this.cdpId}})},openMigrate:function(){this.$route.path.includes("maker-dai")&&this.$router.push({name:"migrate",params:{cdpId:this.cdpId}})},displayPercentValue:function(e){return l.a.isBigNumber(e)||(e=new l.a(e)),e.times(100).toString()},displayFixedValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return l.a.isBigNumber(e)||(e=new l.a(e)),e.isFinite()?e.toFixed(t).toString():"--"},safeRank:function(e){return f(e).gte(2)?"green":f(e).lt(1.6)?"red":"orange"}}},b=g,m=(n("c79c"),n("2877")),w=Object(m["a"])(b,a,r,!1,null,"0c4a2837",null),C=w.exports;t["a"]=C},c79c:function(e,t,n){"use strict";var a=n("d312"),r=n.n(a);r.a},d312:function(e,t,n){}}]);
//# sourceMappingURL=chunk-43958743.99df9032.js.map